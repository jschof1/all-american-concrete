---
import { fetchContent } from '../../utils/fetchContent';
const contentMap = await fetchContent('Navbar');
import Image from '~/components/common/Image.astro';
import AllAmericanWhite from '~/assets/images/all-american-white.webp';
---
<header class="bg-gray-800 bg-opacity-50 text-white py-4 px-6 fixed w-full z-20 transition-transform">
  <div class="container mx-auto flex justify-between items-center relative">
    <div class="flex items-center">
      <Image src={AllAmericanWhite} alt="All American Concrete Logo" class="h-10 md:h-12">
    </div>
    <div class="md:hidden z-30">
      <button id="menu-toggle" class="text-white focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    <nav class="hidden md:flex w-full md:w-auto space-x-6">
      <ul class="flex flex-row space-x-6">
        <li><a href="#about" class="hover:text-red-200">{contentMap['1aInli']}</a></li>
        <li><a href="#portfolio" class="hover:text-red-200">{contentMap['2aInli']}</a></li>
        <li><a href="#team" class="hover:text-red-200">{contentMap['3aInli']}</a></li>
        <li><a href="#testimonials" class="hover:text-red-200">{contentMap['4aInli']}</a></li>
        <li><a href="#contact" class="hover:text-red-200">{contentMap['5aInli']}</a></li>
      </ul>
    </nav>
    <div class="hidden md:flex flex-row items-center space-x-4">
      <div class="flex space-x-4">
        <a href="#" class="text-white hover:text-red-400"><i class="fab fa-facebook-f"></i></a>
        <a href="#" class="text-white hover:text-red-400"><i class="fab fa-twitter"></i></a>
        <a href="#" class="text-white hover:text-red-400"><i class="fab fa-pinterest-p"></i></a>
        <a href="#" class="text-white hover:text-pink-400"><i class="fab fa-instagram"></i></a>
      </div>
      <div class="text-white text-right">
        <p class="text-sm">{contentMap['1pIndiv']}</p>
        <p class="text-lg font-bold">{contentMap['2pIndiv']}</p>
      </div>
    </div>
  </div>
  <div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-90 text-white hidden z-20 flex flex-col items-center justify-center space-y-6 overflow-y-auto w-full">
    <ul class="text-2xl space-y-4 text-center w-full">
      <li><a href="#about" class="hover:text-red-800 block w-full">{contentMap['10aInli']}</a></li>
      <li><a href="#portfolio" class="hover:text-red-800 block w-full">{contentMap['11aInli']}</a></li>
      <li><a href="#team" class="hover:text-red-800 block w-full">{contentMap['12aInli']}</a></li>
      <li><a href="#testimonials" class="hover:text-red-800 block w-full">{contentMap['13aInli']}</a></li>
      <li><a href="#contact" class="hover:text-red-800 block w-full">{contentMap['14aInli']}</a></li>
    </ul>
    <div class="flex space-x-4 mt-6">
      <a href="#" class="text-white hover:text-red-400"><i class="fab fa-facebook-f"></i></a>
      <a href="#" class="text-white hover:text-red-400"><i class="fab fa-twitter"></i></a>
      <a href="#" class="text-white hover:text-red-400"><i class="fab fa-pinterest-p"></i></a>
      <a href="#" class="text-white hover:text-pink-400"><i class="fab fa-instagram"></i></a>
    </div>
    <div class="text-red-800 text-center mt-6">
      <p class="text-sm">{contentMap['3pIndiv']}</p>
      <p class="text-2xl font-bold">{contentMap['4pIndiv']}</p>
    </div>
  </div>
</header>
<script>
let lastScroll = 0;

window.addEventListener('scroll', () => {
  const currentScroll = window.pageYOffset;
  const header = document.querySelector('header');
  if (header) {
    const isDesktop = window.innerWidth >= 1024;

    if (isDesktop) {
      if (currentScroll > lastScroll && currentScroll > 100) {
        header.classList.add('hidden-header');
      } else if (currentScroll < lastScroll) {
        header.classList.remove('hidden-header');
      }
      lastScroll = currentScroll;
    }
  }
});
</script>
